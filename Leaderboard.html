<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanad Citation Network</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #0c0c0f;
            --surface: #16161a;
            --border: #2a2a30;
            --text: #e8e8ed;
            --text-dim: #7a7a85;
            --accent: #d4a847;
            --accent-dim: rgba(212, 168, 71, 0.15);
            --green: #4ade80;
            --mono: 'DM Mono', 'Consolas', monospace;
            --sans: 'Outfit', sans-serif;
        }

        body {
            font-family: var(--sans);
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 32px 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        /* Header */
        header {
            margin-bottom: 32px;
        }

        header h1 {
            font-size: 1.6rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--accent);
            margin-bottom: 4px;
        }

        header p {
            font-size: 0.82rem;
            color: var(--text-dim);
            font-weight: 400;
        }

        .meta {
            font-family: var(--mono);
            font-size: 0.72rem;
            color: var(--text-dim);
            margin-top: 8px;
        }

        /* Table */
        .table-wrap {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #1c1c22;
        }

        th {
            font-family: var(--mono);
            font-size: 0.68rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-dim);
            padding: 12px 16px;
            text-align: left;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
            transition: color 0.15s;
        }

        th:hover {
            color: var(--text);
        }

        th .sort-arrow {
            opacity: 0.4;
            margin-left: 4px;
            font-size: 0.6rem;
        }

        th.sorted .sort-arrow {
            opacity: 1;
            color: var(--accent);
        }

        tbody tr {
            border-top: 1px solid var(--border);
            transition: background 0.15s;
        }

        tbody tr:hover {
            background: rgba(255, 255, 255, 0.025);
        }

        td {
            padding: 11px 16px;
            font-size: 0.84rem;
        }

        /* Rank */
        .rank {
            font-family: var(--mono);
            font-weight: 500;
            width: 56px;
            color: var(--text-dim);
        }

        .rank-1 { color: var(--accent); }
        .rank-2 { color: #a8a8b0; }
        .rank-3 { color: #c47a3a; }

        /* Team */
        .team {
            font-weight: 600;
        }

        /* Scores */
        .score {
            font-family: var(--mono);
            font-size: 0.82rem;
        }

        .primary {
            color: var(--green);
            font-weight: 500;
        }

        /* Model type badge */
        .badge {
            font-family: var(--mono);
            font-size: 0.68rem;
            padding: 3px 8px;
            border-radius: 4px;
            background: var(--accent-dim);
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .badge.human { background: rgba(74, 222, 128, 0.12); color: var(--green); }
        .badge.mixed { background: rgba(168, 130, 255, 0.12); color: #a882ff; }

        /* Timestamp */
        .time {
            font-family: var(--mono);
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 48px 16px;
            color: var(--text-dim);
            font-size: 0.88rem;
        }

        /* Footer */
        footer {
            margin-top: 28px;
            text-align: center;
            font-size: 0.78rem;
            color: var(--text-dim);
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 16px 10px; }
            header h1 { font-size: 1.3rem; }
            td, th { padding: 8px 10px; font-size: 0.75rem; }
            .score { font-size: 0.73rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Sanad Citation Network</h1>
            <p>paragraphe...............</p>
            <div class="meta" id="last-updated"></div>
        </header>

        <div class="table-wrap">
            <table id="leaderboard">
                <thead>
                    <tr>
                        <th data-col="rank"># <span class="sort-arrow"></span></th>
                        <th data-col="Submission">Submission <span class="sort-arrow"></span></th>
                        <th data-col="F1">F1 <span class="sort-arrow"></span></th>
                        <th data-col="Accuracy">Accuracy <span class="sort-arrow"></span></th>
                        <th data-col="Precision">Precision <span class="sort-arrow"></span></th>
                        <th data-col="timestamp">Submitted <span class="sort-arrow"></span></th>
                    </tr>
                </thead>
                <tbody id="tbody">
                    <tr><td colspan="6" class="empty-state">Loading...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const tbody = document.getElementById('tbody');
        const headers = document.querySelectorAll('th[data-col]');

        let data = [];
        let sortCol = 'F1';
        let sortAsc = false;

        async function load() {
            try {
                const res = await fetch('leaderboard.json');
                const json = await res.json();
                data = json.submissions || [];
                // Sort by F1 desc and assign ranks
                data.sort((a, b) => b.F1 - a.F1);
                data.forEach((d, i) => d.rank = i + 1);

                const dt = new Date(json.last_updated);
                document.getElementById('last-updated').textContent =
                    'Updated ' + dt.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) +
                    ' at ' + dt.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                render();
            } catch (e) {
                tbody.innerHTML = '<tr><td colspan="6" class="empty-state">Failed to load data</td></tr>';
            }
        }

        function render() {
            let filtered = data;

            // Sort
            const numCols = ['rank', 'F1', 'Accuracy', 'Precision'];
            filtered.sort((a, b) => {
                let va = a[sortCol], vb = b[sortCol];
                if (numCols.includes(sortCol)) {
                    va = Number(va) || 0; vb = Number(vb) || 0;
                    return sortAsc ? va - vb : vb - va;
                }
                va = String(va || '').toLowerCase();
                vb = String(vb || '').toLowerCase();
                return sortAsc ? va.localeCompare(vb) : vb.localeCompare(va);
            });

            if (!filtered.length) {
                tbody.innerHTML = '<tr><td colspan="6" class="empty-state">No submissions found</td></tr>';
                return;
            }

            tbody.innerHTML = filtered.map((d, i) => {
                const rankClass = d.rank <= 3 ? ' rank-' + d.rank : '';
                const medals = { 1: '', 2: '', 3: '' };
                const medal = medals[d.rank] || '';

                return `<tr>
                    <td class="rank${rankClass}">${medal}${d.rank}</td>
                    <td class="team">${esc(d.Submission)}</td>
                    <td class="score primary">${d.F1.toFixed(4)}</td>
                    <td class="score">${d.Accuracy.toFixed(4)}</td>
                    <td class="score">${d.Precision.toFixed(4)}</td>
                    <td class="time">${esc(d.timestamp)}</td>
                </tr>`;
            }).join('');
        }

        function esc(s) {
            const el = document.createElement('span');
            el.textContent = s;
            return el.innerHTML;
        }

        // Sort on header click
        headers.forEach(th => {
            th.addEventListener('click', () => {
                const col = th.dataset.col;
                if (sortCol === col) {
                    sortAsc = !sortAsc;
                } else {
                    sortCol = col;
                    sortAsc = col === 'rank' || col === 'Submission' || col === 'timestamp';
                }
                headers.forEach(h => h.classList.remove('sorted'));
                th.classList.add('sorted');
                th.querySelector('.sort-arrow').textContent = sortAsc ? '\u25B2' : '\u25BC';
                render();
            });
        });

        load();
    </script>
</body>
</html>
